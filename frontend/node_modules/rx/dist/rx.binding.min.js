/* Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.txt in the project root for license information.*/
(function(a){function b(a){return a&&a.Object===Object?a:null}var c={"function":!0,object:!0},d=c[typeof exports]&&exports&&!exports.nodeType?exports:null,e=c[typeof module]&&module&&!module.nodeType?module:null,f=b(d&&e&&"object"==typeof global&&global),g=b(c[typeof self]&&self),h=b(c[typeof window]&&window),i=(e&&e.exports===d?d:null,b(c[typeof this]&&this)),j=f||h!==(i&&i.window)&&h||g||i||Function("return this")();"function"==typeof define&&define.amd?define(["./rx"],function(b,c){return a(j,c,b)}):"object"==typeof module&&module&&module.exports===d?module.exports=a(j,module.exports,require("./rx")):j.Rx=a(j,{},j.Rx)}).call(this,function(a,b,c,d){function e(a){for(var b=a.length,c=new Array(b),d=0;b>d;d++)c[d]=a[d];return c}var f=c.Observable,g=f.prototype,h=c.AnonymousObservable,i=c.ObservableBase,j=c.Subject,k=c.AsyncSubject,l=c.Observer,m=c.internals.ScheduledObserver,n=c.Disposable.create,o=c.Disposable.empty,p=c.BinaryDisposable,q=c.Scheduler.currentThread,r=c.helpers.isFunction,s=c.internals.inherits,t=c.internals.addProperties,u=c.Disposable.checkDisposed,v=function(a){function b(b,c,d){this.source=b,this._fn1=c,this._fn2=d,a.call(this)}return s(b,a),b.prototype.subscribeCore=function(a){var b=this.source.multicast(this._fn1());return new p(this._fn2(b).subscribe(a),b.connect())},b}(i);g.multicast=function(a,b){return r(a)?new v(this,a,b):new A(this,a)},g.publish=function(a){return a&&r(a)?this.multicast(function(){return new j},a):this.multicast(new j)},g.share=function(){return this.publish().refCount()},g.publishLast=function(a){return a&&r(a)?this.multicast(function(){return new k},a):this.multicast(new k)},g.publishValue=function(a,b){return 2===arguments.length?this.multicast(function(){return new x(b)},a):this.multicast(new x(a))},g.shareValue=function(a){return this.publishValue(a).refCount()},g.replay=function(a,b,c,d){return a&&r(a)?this.multicast(function(){return new y(b,c,d)},a):this.multicast(new y(b,c,d))},g.shareReplay=function(a,b,c){return this.replay(null,a,b,c).refCount()};var w=function(a,b){this._s=a,this._o=b};w.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var a=this._s.observers.indexOf(this._o);this._s.observers.splice(a,1),this._o=null}};var x=c.BehaviorSubject=function(a){function b(b){a.call(this),this.value=b,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return s(b,a),t(b.prototype,l.prototype,{_subscribe:function(a){return u(this),this.isStopped?(this.hasError?a.onError(this.error):a.onCompleted(),o):(this.observers.push(a),a.onNext(this.value),new w(this,a))},getValue:function(){return u(this),this.hasError&&thrower(this.error),this.value},has